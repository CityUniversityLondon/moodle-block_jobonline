<?php ob_start();
global $USER;
?>
<div id='tcgblockwrapper'>
    <form>

  <select onchange='M.block_tcgfeed.setsector(this,"<?= $USER->id?>");'>
    <option value="">Any Sector</option>
    <?php
         
$preset=get_user_preferences('tcgfeed_preferred_sector','');

foreach(explode('|',get_config('block_tcgfeed','sectorlist')) as $sector)
{
    $s=trim($sector);
    print "<option value='$s'";
    if($s===$preset)
        print " selected";
    print ">";
    print ucfirst($s);
    print "</option>\n";
}
?>
  </select>
  <select onchange='M.block_tcgfeed.settype(this,"<?= $USER->id?>");'>
    <option value=''>Any type</option>
    <?php
$preset=get_user_preferences('tcgfeed_preferred_type','');
      foreach(explode('|',get_config('block_tcgfeed','typelist')) as $type)
      {
          print "<option value='$type'";
          if($type===$preset)
              print " selected";
          print ">";
          print ucfirst($type);
          print "</option>\n";
      }
      ?>
  </select>
  <div id='tcgfeed_partfullbuttons'>
          <?php
$preset=get_user_preferences('tcgfeed_preferred_time','');
foreach(array(''=>'Any', 'full'=>'Full-time', 'part'=>'Part-time') as $val=>$display)
{
    print "<span class='tcg_radiobtn'><input type=radio name='fullpart' value='$val'";
    if ($val===$preset)
        print " checked";
    print ">$display</span>";
}
?>
  </div></form>
  <?=$inner?>
</div>

<?php return ob_get_clean();
