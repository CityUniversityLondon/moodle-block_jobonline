<?php ob_start();
global $USER;
?>
<div id='jobonlinesecondaryblockwrapper' bounce="<?=get_config('block_jobonlinesecondary','bounce')?>">
    <form>
        <select onchange='M.block_jobonlinesecondary.settype(this,"<?= $USER->id?>");'>
            <option value=''>Any type</option>
            <?php
            $preset=block_jobonlinesecondary::get_pref('jobonlinesecondary_preferred_type','');
            foreach(block_jobonlinesecondary::alltypes() as $type)
            {
                print "<option value='$type'";
                if(strtolower($type)===$preset)
                    print " selected";
                print ">";
                print ucfirst($type);
                print "</option>\n";
            }
            ?>
        </select>
        <select onchange='M.block_jobonlinesecondary.setsector(this,"<?= $USER->id?>");'>
            <option value="">Any Sector</option>
            <?php

            $preset=block_jobonlinesecondary::get_pref('jobonlinesecondary_preferred_sector','');

            foreach(block_jobonlinesecondary::allareas() as $sector)
            {
                $s=trim($sector);
                print "<option value='$s'";
                if(strtolower($s)===$preset)
                    print " selected";
                print ">";
                print ucfirst($s);
                print "</option>\n";
            }
            ?>
        </select>
        <div id='jobonlinesecondary_sortbuttons'>
            <table width="100%"><tr><td class='jobonlinesecondary_sortbycell'>Sort&nbsp;By:</td>
                <?php
                $preset=block_jobonlinesecondary::get_pref('jobonlinesecondary_preferred_sort','ending-sort');
                foreach(array('ending-sort'=>static::$stringmanager->get_string('ending-sort','block_jobonlinesecondary'),
                'post-sort'=>static::$stringmanager->get_string('post-sort','block_jobonlinesecondary')) as $val=>$display)
                {
                    print "<td class='jobonlinesecondary_radiobtn'><input type=radio name='sortdir' value='$val'";
                    if ($val===$preset)
                        print " checked";
                    print " onchange='M.block_jobonlinesecondary.setsort(this,\"$USER->id\");'>$display</td>";
                }
                ?>
                <td class='jobonlinesecondary_location'><select onchange='M.block_jobonlinesecondary.setlocation(this,"<?= $USER->id?>");'><option value="">Any location</option>
                    <?php
                    $preset=block_jobonlinesecondary::get_pref('jobonlinesecondary_preferred_location','');
                    foreach(block_jobonlinesecondary::alllocations() as $place)
                    {
                        $p=trim($place);
                        print "<option value='$p'";
                        if(strtolower($place)===$preset)
                            print " selected";
                        print ">";
                        print ucfirst($p);
                        print "</option>\n";
                    } ?></select>

            </tr></table>
        </div></form>
    <?=$inner?>
</div>

<?php return ob_get_clean();
